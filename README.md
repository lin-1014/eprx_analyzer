# 需給調整市場分析

- 專門分析日本需給調整市場設計，協助儲能系統參與三次調整力②市場的投標策略分析。

## 背景

日本三次調整力②市場採用複數價格標（Multi-Price Auction），且投標決策不考慮機組價格，導致許多儲能系統因最高結清價格偏低（如 0.5 日元）無法得標。本專案通過分析市場資料中 "最高結清價格"，協助使用者設定價格門檻（如超過 30 日元），以研究各區域（TSO）中高價出現的次數及分布，並根據 4 至 11 月的歷史資料提供最佳投標策略。

---

## 預計功能

1. **資料處理與篩選**：
   - 解壓並載入 EPRX 提供的市場資料。
   - 篩選指定條件（如價格門檻）的數據。

2. **熱力圖可視化**：
   - 根據設定的價格門檻和電力公司別（TSO），生成高價出現次數的 Block × Weekday 熱力圖。

3. **策略建議**：
   - 分析歷史數據，找出得標機率最高的 Block 和星期組合。

---

## 使用方式

1. 安裝依賴
請確保你已安裝 Python 3.8+與poetry套件，並使用以下命令安裝所需套件：

```python
poetry install
或(暫定)
pip install -r requirements.txt
```

2. 資料準備
將目標 EPRX ZIP 檔案放置於 raw_data/ 資料夾下。例如：

```
raw_data/2024_3-2_result.zip
```
3. 執行分析
在終端執行以下命令：

```bash
python main.py
```
4. 參數設置
在 main.py 中，可修改以下參數進行自定義：
    - target_tso：目標電力公司（例如：中部、東北）。
    - price_threshold：價格門檻（例如：25 或 30 日元）。

## 結果與示例

1. 高價次數熱力圖： 熱力圖顯示各 Block 與星期的高價出現次數分布，幫助了解得標可能性。

策略建議：

可優先考慮：
星期X × Block X（XX:00-XX:00）
星期X × Block 6（15:00-18:00）

2. 範例熱力圖
![本地圖片][def]


[def]: ./docs/images/tokyo_example.png